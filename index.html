<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>hacson's tech-tips</title>
        
        <!--css-->
        <link rel="stylesheet" type="text/css" href="./js/node_modules/remodal/dist/remodal.css" />
        <link rel="stylesheet" type="text/css" href="./js/node_modules/remodal/dist/remodal-default-theme.css" />
        <link rel="stylesheet" type="text/css" href="css/buttons.css" />
        <!--js-->
        <script type="text/javascript" src="./js/node_modules/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="./js/node_modules/remodal/dist/remodal.min.js"></script>
        
        <div class="remodal" data-remodal-id="modal">
            <button data-remodal-action="close" class="remodal-close"></button>
            <h1 id="modal_h1">title</h1>
            <p id="modal_p" align="left">content</p>
            <br>
        </div>
    </head>
    <body>
        <script type="text/javascript">
            var _tips = []; // get tips json data to this array
            var _btns = [];

            // TODO : manually modify this array to add or delete tips's json files
            var _jsonFiles =
            [
                "socket - close() vs shutdown().json",
                "C++ smart pointer.json"
            ];

            function getTips()
            {
                var web_side = "https://yhacson.github.io/tech-tips/";
                var tips_url = web_side + "tips/";

                _tips = [];
                for(var i=0; i<_jsonFiles.length; i++)
                {
                    var url = encodeURI(tips_url + _jsonFiles[i]);
                    $.getJSON(url, function (data) {
                        _tips.push(data);
                        var idx = _tips.length - 1;
                        // set button title and content
                        var btn = _btns[idx];
                        btn.innerHTML = data["title"];
                        $(btn).show();
                        $(btn).click(_tips[idx], openModal);
                    });
                }
            }

            function openModal(event)
            {
                var inst = $('[data-remodal-id=modal]').remodal();
                var title = event.data["title"];
                var content = event.data["content"];
                $("#modal_h1").html(title);
                $("#modal_p").html(content);
                inst.open();
            }

            window.onload = function()
            {
                // create buttons
                _btns = [];
                for(var i=0; i<_jsonFiles.length; i++)
                {
                    var btn = document.createElement("item"+i);
                    btn.className = "btnItem";
                    btn.innerHTML = "btn"+i;
                    $(btn).hide();  // set button invisible
                    _btns.push(btn);
                    document.body.appendChild(btn);
                }
                getTips();
            }
        </script>
    </body>
</html>